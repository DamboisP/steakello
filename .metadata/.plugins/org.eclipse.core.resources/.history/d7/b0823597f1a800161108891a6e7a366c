package view;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JPanel;

import controller.GameController;
import model.GameBoard;

public class GameBoardView extends JPanel implements MouseListener{
	private int windowWidth;
	private int windowHeight;
	private GameController controller;
	private GameBoard gameBoard;

	//Images

	private Image background;
	private Image border;
	private Image rawSteak;
	private Image cookedSteak;
	
	//Taille des images
	private int cellSize;
	
	//Position des images
	private int gameBoardX;
	private int gameBoardY;
	private Font font;
	public GameBoardView(int windowWidth, int windowHeight, GameController controller) {
		this.windowWidth = windowWidth;
		this.windowHeight = windowHeight;
		this.controller = controller;
		font = new Font("Arial", Font.PLAIN, 30);
		try {
			background = ImageIO.read(new File("src/images/background.png"));
			rawSteak = ImageIO.read(new File("src/images/rawSteak.png"));
			cookedSteak = ImageIO.read(new File("src/images/cookedSteak.png"));
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	@Override
    public void paintComponent(Graphics g) {
		g.drawImage(background, 0, 0, windowWidth, windowHeight, null);
		
		g.setFont(font);

		g.drawString("J1: "+gameBoard.score()[0], 0, 30);
		g.drawString("J2: "+gameBoard.score()[1], 200, 30);
		g.drawString("C'est au tour du joueur "+gameBoard.getPlayer(), 0, 60);
		g.setColor(Color.WHITE);
		g.drawImage(border, gameBoardX, gameBoardY, gameBoardX + gameBoard.getSize()*cellSize, gameBoardY + gameBoard.getSize()*cellSize, 0, 0, border.getWidth(guiPanel), border.getWidth(guiPanel), guiPanel);
	
		for(int i = 0; i < gameBoard.getChipArray().length;i++){
			for(int j = 0; j < gameBoard.getChipArray().length;j++){
				g.setColor(Color.BLACK);
				g.drawRect(gameBoardX + i*cellSize,gameBoardY + j*cellSize, cellSize, cellSize);
				if(gameBoard.getChipArray()[i][j].isSet()){
					if(gameBoard.getChipArray()[i][j].getPlayer() == 1){
						g.drawImage(rawSteak, (gameBoardX + i*cellSize), (gameBoardY + j*cellSize), (gameBoardX + i*cellSize)+cellSize,(gameBoardY + j*cellSize)+cellSize, 0, 0, rawSteak.getWidth(guiPanel), rawSteak.getWidth(guiPanel), guiPanel);
					 }
					 else if(gameBoard.getChipArray()[i][j].getPlayer() == 2){
						 g.drawImage(cookedSteak, (gameBoardX + i*cellSize), (gameBoardY + j*cellSize), (gameBoardX + i*cellSize)+cellSize,(gameBoardY + j*cellSize)+cellSize, 0, 0, rawSteak.getWidth(guiPanel), rawSteak.getWidth(guiPanel), guiPanel);  
					 }
				 }
			  }
		  }
	 }
	
	@Override
	public void mouseClicked(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mouseEntered(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mouseExited(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mousePressed(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mouseReleased(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}

	public void setGameBoard(GameBoard gameBoard) {
		this.gameBoard = gameBoard;
	}

}
